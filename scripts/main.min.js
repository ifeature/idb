"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}();/*!
 *
 *  Web Starter Kit
 *  Copyright 2015 Google Inc. All rights reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *    https://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License
 *
 */
MaterialMenu.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),this.container_=e;var t=document.createElement("div");t.classList.add(this.CssClasses_.OUTLINE),this.outline_=t,e.insertBefore(t,this.element_);var n=this.element_.getAttribute("for"),s=null;if(n){if(s=document.getElementById(n),!s)for(var r=this.element_.parentElement.parentElement.getElementsByTagName("button"),a=0;a<r.length;a++)r[a].getAttribute("id")===n&&(s=r[a]);s&&(this.forElement_=s,s.addEventListener("click",this.handleForClick_.bind(this)),s.addEventListener("keydown",this.handleForKeyboardEvent_.bind(this)))}var i=this.element_.querySelectorAll("."+this.CssClasses_.ITEM);this.boundItemKeydown=this.handleItemKeyboardEvent_.bind(this),this.boundItemClick=this.handleItemClick_.bind(this);for(var o=0;o<i.length;o++)i[o].addEventListener("click",this.boundItemClick),i[o].tabIndex="-1",i[o].addEventListener("keydown",this.boundItemKeydown);if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT))for(this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),o=0;o<i.length;o++){var l=i[o],d=document.createElement("span");d.classList.add(this.CssClasses_.ITEM_RIPPLE_CONTAINER);var c=document.createElement("span");c.classList.add(this.CssClasses_.RIPPLE),d.appendChild(c),l.appendChild(d),l.classList.add(this.CssClasses_.RIPPLE_EFFECT)}this.element_.classList.contains(this.CssClasses_.BOTTOM_LEFT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_LEFT),this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_RIGHT),this.element_.classList.contains(this.CssClasses_.TOP_LEFT)&&this.outline_.classList.add(this.CssClasses_.TOP_LEFT),this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)&&this.outline_.classList.add(this.CssClasses_.TOP_RIGHT),this.element_.classList.contains(this.CssClasses_.UNALIGNED)&&this.outline_.classList.add(this.CssClasses_.UNALIGNED),e.classList.add(this.CssClasses_.IS_UPGRADED)}},function(){function e(){return"indexedDB"in window}function t(e){return e.every(function(e){return e.value&&!e.validity.typeMismatch})}function n(e,t){e=e||"Unknown error",t=t||"";var n=document.getElementById("error-template"),s=n.content.firstElementChild.cloneNode(!0);s.innerHTML=s.innerHTML.replace(/{{errorName}}/gi,e).replace(/{{errorMessage}}/gi,t),document.body.appendChild(s),s.showModal||dialogPolyfill.registerDialog(s),s.showModal(),s.querySelector(".close").addEventListener("click",function(){s.close(),s.remove()})}function s(){function e(e,n){var s=document.getElementById("record-template"),r=s.content.firstElementChild.cloneNode(!0);r.innerHTML=r.innerHTML.replace(/{{id}}/gi,e).replace(/{{userName}}/gi,n.userName).replace(/{{userCountry}}/gi,n.userCountry).replace(/{{userEmail}}/gi,n.userEmail);var i=r.querySelector(".show-actions-button"),l=r.querySelector(".actions-menu");componentHandler.upgradeElement(i,"MaterialButton"),componentHandler.upgradeElement(l,"MaterialMenu"),t.appendChild(r);var d=r.querySelector(".delete-user-button");d.addEventListener("click",function(){a(e)});var c=r.querySelector(".edit-user-button"),u={userName:n.userName,userCountry:n.userCountry,userEmail:n.userEmail,id:e};c.addEventListener("click",function(){o("Edit user",!0,u)})}for(var t=document.getElementById("users").tBodies[0];t.hasChildNodes();)t.firstElementChild.remove();var n=u.transaction([E],"readonly"),s=n.objectStore(E),r=s.count(),i=s.openCursor(null,"next");i.addEventListener("success",function(t){var n=t.target.result;n&&(e(n.key,n.value),n["continue"]())}),r.addEventListener("success",function(e){var t=e.target.result;document.getElementById("totalAmout").innerHTML=t})}function r(e){var t=u.transaction([E],"readwrite"),r=t.objectStore(E),a=r.add(e);a.addEventListener("error",function(e){var t=e.target.error;n(t.name,t.message)}),a.addEventListener("success",function(e){e.target.result}),t.addEventListener("complete",function(e){l("User was added"),s()})}function a(e){var t=u.transaction([E],"readwrite"),r=t.objectStore(E),a=r["delete"](e);a.addEventListener("error",function(e){var t=e.target.error;n(t.name,t.message)}),a.addEventListener("success",function(e){e.target.result}),t.addEventListener("complete",function(e){l("User was deleted"),s()})}function i(e){var t=u.transaction([E],"readwrite"),r=t.objectStore(E),a=r.put(e);a.addEventListener("error",function(e){var t=e.target.error;n(t.name,t.message)}),a.addEventListener("success",function(e){e.target.result}),t.addEventListener("complete",function(e){l("User was edited"),s()})}function o(e,n,s){var a={},o=document.querySelector("dialog"),l=o.querySelector(".mdl-dialog__title"),d=o.querySelector("#userName"),c=o.querySelector("#userCountry"),u=o.querySelector("#userEmail");for(n&&(d.value=s.userName,c.value=s.userCountry,u.value=s.userEmail);l.hasChildNodes();)l.firstChild.remove();l.appendChild(document.createTextNode(e)),o.showModal||dialogPolyfill.registerDialog(o),o.showModal(),o.querySelector(".close").addEventListener("click",function(){o.hasAttribute("open")&&o.close()}),o.querySelector(".agree").addEventListener("click",function(){t([d,c,u])&&(a.userName=d.value,a.userCountry=c.value,a.userEmail=u.value,n?(console.log("Editing"),a.id=s.id,i(a)):(console.log("Adding"),r(a)),d.value="",c.value="",u.value=""),o.hasAttribute("open")&&o.close()})}function l(e){(new f).show(e)}function d(){if(e()){m=indexedDB.open(h,v),m.addEventListener("blocked",function(e){e.target.error;l("Connection request was blocked")}),m.addEventListener("error",function(e){var t=e.target.error;n(t.name,t.message)}),m.addEventListener("upgradeneeded",function(e){var t=e.target.result;if(!t.objectStoreNames.contains(E)){var n=t.createObjectStore(E,{keyPath:"id",autoIncrement:!0});n.createIndex("idxEmail","userEmail",{unique:!0}),n.createIndex("idxCountry","userCountry",{unique:!1})}l("DB was initialized / created")}),m.addEventListener("success",function(e){u=e.target.result,l("DB was loaded successfully"),s()});var t=document.getElementById("add");t.addEventListener("click",function(){o("Add new user",!1)})}}var c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||c)&&navigator.serviceWorker.register("service-worker.js").then(function(e){"function"==typeof e.update&&e.update(),e.onupdatefound=function(){if(navigator.serviceWorker.controller){var t=e.installing;t.onstatechange=function(){switch(t.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}})["catch"](function(e){console.error("Error during service worker registration:",e)});var u=void 0,m=void 0,h="addressBook.db",v=1,E="users",f=function(){function e(){_classCallCheck(this,e),e.element?this.element=e.element:(this.element=e.create(),e.element=this.element)}return _createClass(e,[{key:"show",value:function(e){var t=document.getElementById("demo-toast-example"),n={message:e};return setTimeout(function(){t.MaterialSnackbar.showSnackbar(n)},2e3),this}}],[{key:"create",value:function(){var e=document.getElementById("snackbar-template"),t=e.content.cloneNode(!0);return document.body.appendChild(t),t}}]),e}();document.addEventListener("DOMContentLoaded",d)}();
//# sourceMappingURL=main.min.js.map
